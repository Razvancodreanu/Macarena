<!doctype html>
<html lang="ro">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Macarena • Live Location</title>

    <!-- Leaflet -->
    <link rel="stylesheet"
          href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
          crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQcQsbgoQdjJ27Guk2/9VM+NjkyvNN1V1ZBo="
            crossorigin=""
            defer></script>

    <!-- Supabase client -->
    <script src="https://unpkg.com/@supabase/supabase-js@2" defer></script>

    <link rel="stylesheet" href="./style.css" />
</head>
<body>
    <header class="topbar">
        <div class="brand">Macarena • Live Location</div>
        <div class="room-inline">
            <input id="room-input" type="text" placeholder="ex: familia, echipa-42" />
            <button id="btn-join">Join</button>
            <button id="btn-center">Center me</button>
        </div>
    </header>

    <!-- Harta -->
    <main id="map" aria-label="map"></main>

    <!-- Panoul din dreapta -->
    <aside id="panel" aria-label="panel">
        <section class="card">
            <h3>Profil</h3>
            <div class="row">
                <div class="avatar">avatar</div>
                <input id="profile-name" type="text" placeholder="Nume și prenume" />
                <button id="btn-photo">Încarcă poză</button>
                <button id="btn-save-profile">Salvează</button>
            </div>
        </section>

        <section class="card">
            <h3>Autentificare</h3>
            <div class="stack">
                <button id="btn-google">Sign in with Google</button>
                <div class="row">
                    <input id="magic-email" type="email" placeholder="email pentru magic link" />
                    <button id="btn-magic">Trimite magic link</button>
                </div>
                <div class="row">
                    <input id="phone" type="tel" placeholder="+40 7xx xxx xxx" />
                    <button id="btn-sms">SMS OTP</button>
                </div>
                <div class="row">
                    <input id="otp" type="text" placeholder="Cod SMS" />
                    <button id="btn-verify">Confirmă</button>
                </div>
                <button id="btn-logout" class="ghost">Sign out</button>
            </div>
        </section>

        <section class="card">
            <h3>Mod vizibilitate</h3>
            <label><input type="radio" name="mode" value="global" checked /> Global (toți utilizatorii)</label>
            <label><input type="radio" name="mode" value="private" /> Cameră privată</label>
            <div class="row">
                <input id="invite-link" type="text" placeholder="Link de invitat pentru cameră" readonly />
            </div>
        </section>

        <section class="card">
            <h3>Share location</h3>
            <div class="row">
                <button id="btn-start">Start sharing</button>
                <button id="btn-stop" class="danger">Stop</button>
            </div>
            <small>Telefonul/Browserul cere permisiunea de locație. Trimitere ~ la 5s dacă se schimbă.</small>
        </section>

        <section class="card">
            <h3>Alerte</h3>
            <div class="row">
                <button id="btn-sos" class="sos">SOS</button>
                <button id="btn-checkin">Check-in</button>
            </div>
        </section>

        <section class="card">
            <h3>Live • Membri</h3>
            <ul id="live-members" class="list"></ul>
        </section>

        <section class="card">
            <h3>Traseul tău în ultimele 24h</h3>
            <div class="row">
                <button id="btn-load">Încarcă</button>
                <button id="btn-clear" class="ghost">Curăță</button>
            </div>
        </section>

        <footer class="mini">
            <small>schema: <b>macarena</b> • tables: <i>locations, locations_history, alerts, profiles</i></small>
        </footer>
    </aside>

    <!-- app.js cu cache-bust; înlocuiește v=XXXX cu SHA-ul commitului tău -->
    <script type="module" src="./app.js?v=4cb126e"></script>
</body>
</html>
